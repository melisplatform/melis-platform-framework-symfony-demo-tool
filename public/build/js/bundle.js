$(function(){function e(e){$.ajax({url:e,data:$("#album_form").serializeArray(),method:"POST",beforeSend:function(){$("#btn-save-album").attr("disabled",!0),$("#album_form :input").prop("disabled",!0)}}).done(function(e){melisCore.flashMessenger(),e=$.parseJSON(e),e.success?($("#symfonyDemoToolAlbumModal").modal("hide"),melisHelper.melisOkNotification(e.title,e.message),$("#tableSymfonyDemoTool").DataTable().ajax.reload(),l=null):(melisHelper.melisKoNotification(e.title,e.message,e.errors),melisCoreTool.highlightErrors(0,e.errors,"album_form")),$("#btn-save-album").attr("disabled",!1),$("#album_form :input").prop("disabled",!1)}).fail(function(){alert(translations.tr_meliscore_error_message)})}function o(e){var o=$("#symfonyDemoToolAlbumModal");o.modal("show"),$.ajax({url:e,method:"GET",beforeSend:function(){o.find(".modal-content #loader").removeClass("hidden"),o.find(".modal-content .modal-body").addClass("hidden");var e=o.find("li.active").find("a");null==l?(e.removeClass("edit").addClass("plus"),e.find("p.modal-tab-title").text(translations.tool_add_album)):(e.removeClass("plus").addClass("edit"),e.find("p.modal-tab-title").text(translations.tool_update_album))}}).done(function(e){o.find(".modal-content #loader").addClass("hidden"),o.find(".modal-content .modal-body").removeClass("hidden"),e=$.parseJSON(e),$.each(e,function(e,a){o.find(".tab-content #"+e).html(a)})}).fail(function(){alert(translations.tr_meliscore_error_message)})}var a=$("body"),l=null;a.on("click",".symfony-demo-tool #btn-update-album",function(){var e=$(this);l=e.parents("tr").attr("id"),o("/melis/get-form/"+l)}),a.on("click",".symfony-demo-tool #btn-new-album",function(){l=null,o("/melis/get-form")}),a.on("click","#btn-save-album",function(){e(null==l?"/melis/save-album":"/melis/save-album/"+l)}),a.on("click",".symfony-demo-tool #btn-delete-album",function(){var e=$(this);melisCoreTool.confirm(translations.tool_confirm_modal_yes,translations.tool_confirm_modal_no,translations.tool_confirm_modal_title,translations.tool_confirm_modal_message,function(){$.ajax({url:"/melis/delete-album",data:{id:e.parents("tr").attr("id")},method:"POST"}).done(function(e){melisCore.flashMessenger(),e=$.parseJSON(e),e.success?(melisHelper.melisOkNotification(e.title,e.message),$("#tableSymfonyDemoTool").DataTable().ajax.reload()):melisHelper.melisKoNotification(e.title,e.message)}).fail(function(){alert(translations.tr_meliscore_error_message)})})})});