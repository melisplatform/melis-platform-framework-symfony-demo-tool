$(document).ready(function(){function e(e){$.ajax({url:e,data:$("#album_form").serializeArray(),method:"POST",beforeSend:function(){$("#btn-save-album").attr("disabled",!0),$("#album_form :input").prop("disabled",!0)},success:function(e){melisCore.flashMessenger(),e=$.parseJSON(e),e.success?($("#symfonyDemoToolAlbumModal").modal("hide"),melisHelper.melisOkNotification(e.title,e.message),$("#tableSymfonyDemoTool").DataTable().ajax.reload(),a=null):(melisHelper.melisKoNotification(e.title,e.message,e.errors),melisCoreTool.highlightErrors(0,e.errors,"album_form")),$("#btn-save-album").attr("disabled",!1),$("#album_form :input").prop("disabled",!1)}})}function o(e){var o=$("#symfonyDemoToolAlbumModal");o.modal("show"),$.ajax({url:e,method:"GET",beforeSend:function(){o.find(".modal-content #loader").removeClass("hidden"),o.find(".modal-content .modal-body").addClass("hidden");var e=o.find("li.active").find("a");null==a?(e.removeClass("edit").addClass("plus"),e.find("p.modal-tab-title").text(translations.tool_add_album)):(e.removeClass("plus").addClass("edit"),e.find("p.modal-tab-title").text(translations.tool_update_album))},success:function(e){o.find(".modal-content #loader").addClass("hidden"),o.find(".modal-content .modal-body").removeClass("hidden"),o.find(".tab-content .active").html(e)}})}var l=$("body"),a=null;l.on("click",".symfony-demo-tool #btn-update-album",function(){a=$(this).parents("tr").attr("id"),o("/melis/get-form/"+a)}),l.on("click",".symfony-demo-tool #btn-new-album",function(){a=null,o("/melis/get-form")}),l.on("click","#btn-save-album",function(){e(null==a?"/melis/save-album":"/melis/save-album/"+a)}),l.on("click",".symfony-demo-tool #btn-delete-album",function(){var e=$(this);melisCoreTool.confirm(translations.tool_confirm_modal_yes,translations.tool_confirm_modal_no,translations.tool_confirm_modal_title,translations.tool_confirm_modal_message,function(){$.ajax({url:"/melis/delete-album",data:{id:e.parents("tr").attr("id")},method:"POST",beforeSend:function(){},success:function(e){melisCore.flashMessenger(),e=$.parseJSON(e),e.success?(melisHelper.melisOkNotification(e.title,e.message),$("#tableSymfonyDemoTool").DataTable().ajax.reload()):melisHelper.melisKoNotification(e.title,e.message)}})})})});